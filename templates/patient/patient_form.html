{% extends "base.html" %}

{% block title %}{% if patient %}编辑病人{% else %}添加病人{% endif %}{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{% if patient %}编辑病人信息{% else %}添加新病人{% endif %}</h1>
</div>

<form method="post" class="form">
    <div class="form-group">
        <label for="patient_no">病人编号 *</label>
        <input type="text" id="patient_no" name="patient_no" value="{{ patient.patient_no if patient else '' }}" required {% if patient %}readonly{% endif %}>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="name">姓名 *</label>
            <input type="text" id="name" name="name" value="{{ patient.name if patient else '' }}" required>
        </div>
        <div class="form-group">
            <label for="gender">性别 *</label>
            <select id="gender" name="gender" required>
                <option value="男" {% if patient and patient.gender == '男' %}selected{% endif %}>男</option>
                <option value="女" {% if patient and patient.gender == '女' %}selected{% endif %}>女</option>
            </select>
        </div>
        <div class="form-group">
            <label for="age">年龄</label>
            <input type="number" id="age" name="age" value="{{ patient.age if patient else '' }}">
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="phone">联系电话</label>
            <input type="text" id="phone" name="phone" value="{{ patient.phone if patient else '' }}">
        </div>
        <div class="form-group">
            <label for="id_card">身份证号</label>
            <input type="text" id="id_card" name="id_card" value="{{ patient.id_card if patient else '' }}">
        </div>
    </div>

    <div class="form-group">
        <label for="address">住址</label>
        <input type="text" id="address" name="address" value="{{ patient.address if patient else '' }}">
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="emergency_contact">紧急联系人</label>
            <input type="text" id="emergency_contact" name="emergency_contact" value="{{ patient.emergency_contact if patient else '' }}">
        </div>
        <div class="form-group">
            <label for="emergency_phone">紧急联系电话</label>
            <input type="text" id="emergency_phone" name="emergency_phone" value="{{ patient.emergency_phone if patient else '' }}">
        </div>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">保存</button>
        <a href="{{ url_for('patient.patient_list') }}" class="btn btn-secondary">取消</a>
    </div>
</form>
{% endblock %}

